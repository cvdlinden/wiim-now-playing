var e=io.connect(":80");btnDevices.addEventListener("click",function(){tickDevicesGetUp.classList.add("tickAnimate"),e.emit("devices-get")}),btnRefresh.addEventListener("click",function(){tickDevicesRefreshUp.classList.add("tickAnimate"),e.emit("devices-refresh"),setTimeout(()=>{tickDevicesGetUp.classList.add("tickAnimate"),e.emit("devices-get"),tickServerSettingsUp.classList.add("tickAnimate"),e.emit("server-settings")},5e3)}),deviceChoices.addEventListener("change",function(){tickDeviceSetUp.classList.add("tickAnimate"),e.emit("device-set",this.value)}),btnReboot.addEventListener("click",function(){e.emit("server-reboot")}),btnUpdate.addEventListener("click",function(){e.emit("server-update")}),btnShutdown.addEventListener("click",function(){e.emit("server-shutdown")}),btnReloadUI.addEventListener("click",function(){location.reload()}),tickStateUp.addEventListener("animationend",e=>{e.srcElement.classList.remove("tickAnimate")}),tickStateDown.addEventListener("animationend",e=>{e.srcElement.classList.remove("tickAnimate")}),tickMetadataUp.addEventListener("animationend",e=>{e.srcElement.classList.remove("tickAnimate")}),tickMetadataDown.addEventListener("animationend",e=>{e.srcElement.classList.remove("tickAnimate")}),tickDevicesGetUp.addEventListener("animationend",e=>{e.srcElement.classList.remove("tickAnimate")}),tickDevicesGetDown.addEventListener("animationend",e=>{e.srcElement.classList.remove("tickAnimate")}),tickDevicesRefreshUp.addEventListener("animationend",e=>{e.srcElement.classList.remove("tickAnimate")}),tickDevicesRefreshDown.addEventListener("animationend",e=>{e.srcElement.classList.remove("tickAnimate")}),tickDeviceSetUp.addEventListener("animationend",e=>{e.srcElement.classList.remove("tickAnimate")}),tickDeviceSetDown.addEventListener("animationend",e=>{e.srcElement.classList.remove("tickAnimate")}),tickServerSettingsUp.addEventListener("animationend",e=>{e.srcElement.classList.remove("tickAnimate")}),tickServerSettingsDown.addEventListener("animationend",e=>{e.srcElement.classList.remove("tickAnimate")});var t=null,i=null;setTimeout(()=>{tickServerSettingsUp.classList.add("tickAnimate"),e.emit("server-settings"),tickDevicesGetUp.classList.add("tickAnimate"),e.emit("devices-get")},500),e.on("server-settings",function(e){if(console.log("IO: server-settings",e),tickServerSettingsDown.classList.add("tickAnimate"),t=e,sServerSettings.innerHTML=JSON.stringify(e),"/bin/bash"===e.os.userInfo.shell&&(btnReboot.disabled=!1,btnUpdate.disabled=!1,btnShutdown.disabled=!1),sFriendlyname.children[0].innerText=e&&e.selectedDevice&&e.selectedDevice.friendlyName?e.selectedDevice.friendlyName:"-",sManufacturer.children[0].innerText=e&&e.selectedDevice&&e.selectedDevice.manufacturer?e.selectedDevice.manufacturer:"-",sModelName.children[0].innerText=e&&e.selectedDevice&&e.selectedDevice.modelName?e.selectedDevice.modelName:"-",sLocation.children[0].innerText=e&&e.selectedDevice&&e.selectedDevice.location?e.selectedDevice.location:"-",e&&e.os&&e.os.hostname){var i="http://"+e.os.hostname.toLowerCase()+".local";i+=e.server&&e.server.port&&80!=e.server.port?":"+e.server.port+"/":"/",sServerUrlHostname.children[0].innerText=i}else sServerUrlHostname.children[0].innerText="-";if(e&&e.selectedDevice&&e.selectedDevice.location&&e.os&&e.os.networkInterfaces){var n=e.selectedDevice.location.split("/")[2].split(".");n.pop();var a=n.join(".");Object.keys(e.os.networkInterfaces).forEach(function(t,i){var n=e.os.networkInterfaces[t].find(e=>e.address.startsWith(a));if(n){var s="http://"+n.address;s+=e.server&&e.server.port&&80!=e.server.port?":"+e.server.port+"/":"/",sServerUrlIP.children[0].innerText=s}})}else sServerUrlIP.children[0].innerText="-"}),e.on("devices-get",function(e){console.log("IO: devices-get",e),tickDevicesGetDown.classList.add("tickAnimate"),(i=e).sort((e,t)=>e.friendlyName<t.friendlyName?-1:1),deviceChoices.innerHTML='<option value="">Select a device...</em></li>';var n=i.filter(e=>e.manufacturer.startsWith("Linkplay"));if(n.length>0){var a=document.createElement("optgroup");a.label="WiiM devices",n.forEach(e=>{var i=document.createElement("option");i.value=e.location,i.innerText=e.friendlyName,i.title="By "+e.manufacturer,t&&t.selectedDevice&&t.selectedDevice.location===e.location&&i.setAttribute("selected","selected"),a.appendChild(i)}),deviceChoices.appendChild(a)}var s=i.filter(e=>!e.manufacturer.startsWith("Linkplay"));if(s.length>0){var a=document.createElement("optgroup");a.label="Other devices",s.forEach(e=>{var i=document.createElement("option");i.value=e.location,i.innerText=e.friendlyName,i.title="By "+e.manufacturer,t&&t.selectedDevice&&t.selectedDevice.location===e.location&&i.setAttribute("selected","selected"),a.appendChild(i)}),deviceChoices.appendChild(a)}0==n.length&&0==s.length&&(deviceChoices.innerHTML='<option disabled="disabled">No devices found!</em></li>')}),e.on("device-set",function(t){console.log("IO: device-set",t),tickDeviceSetDown.classList.add("tickAnimate"),tickServerSettingsUp.classList.add("tickAnimate"),e.emit("server-settings"),tickDevicesGetUp.classList.add("tickAnimate"),e.emit("devices-get")}),e.on("devices-refresh",function(e){console.log("IO: devices-refresh",e),tickDevicesRefreshDown.classList.add("tickAnimate"),deviceChoices.innerHTML='<option disabled="disabled">Waiting for devices...</em></li>'}),e.on("state",function(e){if(tickStateDown.classList.add("tickAnimate"),state.innerHTML=JSON.stringify(e),e&&e.stateTimeStamp&&e.metadataTimeStamp){var t=e.stateTimeStamp&&e.metadataTimeStamp?Math.round((e.stateTimeStamp-e.metadataTimeStamp)/1e3):0;sTimeStampDiff.innerHTML=t+"s"}else sTimeStampDiff.innerHTML=""}),e.on("metadata",function(e){tickMetadataDown.classList.add("tickAnimate"),metadata.innerHTML=JSON.stringify(e),sTitle.children[0].innerText=e&&e.trackMetaData&&e.trackMetaData["dc:title"]?e.trackMetaData["dc:title"]:"-",sArtist.children[0].innerText=e&&e.trackMetaData&&e.trackMetaData["upnp:artist"]?e.trackMetaData["upnp:artist"]:"-",sAlbum.children[0].innerText=e&&e.trackMetaData&&e.trackMetaData["upnp:album"]?e.trackMetaData["upnp:album"]:"-",sAlbumArtUri.children[0].innerText=e&&e.trackMetaData&&e.trackMetaData["upnp:albumArtURI"]?e.trackMetaData["upnp:albumArtURI"]:"-",sSubtitle.children[0].innerText=e&&e.trackMetaData&&e.trackMetaData["dc:subtitle"]?e.trackMetaData["dc:subtitle"]:"-"});
//# sourceMappingURL=debug.7d1b509e.js.map
